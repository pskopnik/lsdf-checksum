# Results

## Environment

The benchmarks were performed on the gpfstest-01 system running with no
significant load using MariaDB 10.3.10.

The system uses a default MariaDB configuration with the exception of a large
buffer pool (32 GiB). This large size is chosen to avoid exhaustion of lock
space (`innodb lock table exceeded`).

```
[mariadb]
innodb_buffer_pool_size = 34359738368
```

The `file_data_medium` table is used for benchmarking. The table contains a
random subset of `100000` rows of the `file_data` table. The files have been
generated by `gentree` tool.

## Output

Several runs of the benchmark have been performed with different
configuration. The configuration files are included in this directory together
with the output generated by the benchmark execution.

 * `sequential_explorative`: different values for `transaction_size` and
    `batch_size` for all methods while concurrency is `0`. The benchmark took
    `154m27.190s`.
 * `concurrent_explorative`: reduced set of values for `transaction_size` and
    `batch_size` for all methods with different concurrencies. The benchmark
    took `167m41.267s`.
 * `updatecase_explorative`: Various ranges of values for all parameters but
    only for the `updatecase` method. The benchmark took `148m20.935s`.

## Evaluation

### `sequential_explorative`

The sequential benchmark showed that `collectjoin` is the fastest method for
writing back checksums. Further evaluation showed that the `batch_size`
parameter has the most significant impact on the duration. When running with a
reasonable `batch_size` value, `transaction_size` has little impact on the
duration: Even `transaction_size` values < 100 perform well.

### `concurrent_explorative`

The concurrent benchmarks showed that the `concurrency` parameter has the most
significant impact on the total duration. With increased concurrency values,
the `updatecase` method is significantly faster than any other method.

The benchmarks showed that the `updatecase` method is up to 2.5 times faster
than the `basic` method with optimal parameter combination.

### `updatecase_explorative`

This benchmark evaluates further parameter combination only for the
`updatecase` method. The benchmarks shows (again) that a suitable value for
the `concurrency` parameter has the highest impact. The `batch_size` parameter
remains important while the `transaction_size` parameter has almost no impact.

The optimal `concurrency` value seems to be between `20` and `30` for a
database system with 16 threads.

A `batch_size` value of `500` seems appropriate. A `transaction_size` value
between `10` and `100` yields good results.
